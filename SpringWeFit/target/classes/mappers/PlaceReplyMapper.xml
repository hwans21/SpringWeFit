<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.spring.wefit.placeboard.mapper.ICourseReplyMapper">


	<!-- 장소게시판 댓글 등록 -->
	<insert id="replyRegist">
		INSERT INTO PlaceReply(prNum, pbNum, prContent, memberNum, starScore, prRegDate)
	  	VALUES(placeReply_seq,NEXTVAL, #{pbNum}, #{prContent}, #{memberNum}, #{starScore}, #{prRegDate})
	 </insert>
	  
	<!-- 장소게시판 댓글 수정 -->
	<update id="replyUpdate">
	  	UPDATE PlaceReply
	  	SET prContent = #{prContent}
	  	WHERE prNum = #{prNum}
	</update>
	
	<!-- 장소게시판 댓글 삭제 -->
 	<delete id="replyDelete">
	  	DELETE FROM PlaceReply
		WHERE prNum = #{prNum}
	</delete>

	<!-- 장소게시판 댓글 개수 -->
	<select id="replyGetTotal" resultType="int">
	  	SELECT COUNT(*) FROM PlaceReply pb, PlaceReply pr
		WHERE pb.pbNum = pr.pbNum
	</select>
	
	<!-- 장소게시판 댓글 목록 -->
	<select id="replyGetList">
		SELECT * FROM PlaceReply
		WHERE drNum = #{prNum}
		ORDER BY prNum DESC
	</select>
	
	<!-- 
	<select id="getList" resultType="com.spring.wefit.command.PlaceReplyVO">
		SELECT * FROM
		(
			SELECT ROWNUM as rn, placereply.* FROM
			(
				SELECT pr.*, m.memberNick
				FROM PlaceReply pr, Member m
				WHERE pr.pbNum = #{pbNum }
				AND pr.memberNum = m.memberNum
				ORDER BY pr.prRegDate DESC
			) placereply
		)
		<![CDATA[
		WHERE rn > (#{paging.pageNum}-1)*#{paging.countPerPage}
		AND rn <= #{paging.pageNum} * #{paging.countPerPage}
		]]>
	</select>
	-->
	

</mapper>